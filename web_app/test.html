<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cursor Position</title>
  <style>
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }

    .line {
      padding: 3px;
      white-space: pre-wrap;
    }

    #container {
      display: flex;
      align-items: center;
    }

    #code {
      max-width: 50%;
      overflow: auto;
      border: 1px solid #ccc;
      margin-top: 20px;
      margin-right: 20px;
    }

    #imageContainer {
      margin-top: 20px;
      margin-right: 20px;
      position: relative;
    }

    .highlight {
      position: absolute;
      background-color: rgba(0, 0, 255, 0); 
      border: 1px solid blue;
      border-radius: 20px;
    }
  </style>
</head>
<body>

<div id="container">
  <div id="imageContainer">
    <img src="6.jpg" alt="Your Image">
    <div id="highlightPoint" class="highlight"></div>
  </div>

  <div id="code" contenteditable="false">
  </div>
</div>

<script>
  const lines = [
'ininiollo: ipampa, aco itla qualtzin, inj',
 'pan iconiazque: aco itla ipan mo',
 'povatiuj: itla qualli, qujcnopilujz',
 'que. Auh in ieoquicacque, injuh',
 'quj ommjmjctoc, ic vetzca, tlatlapi',
 'tzaoa: inju hquj, ixillan, ijomotlan,',
 'on quaquauhti: injuhquj, mocaca',
 'naoa, paquj, vevetzca: iuhqujn on',
 'tlanavi, iuhqujn ocevetzi, aocac na',
 'oati: ca tlatoliuj, ca tlaquechpili',
 'uj, aiocmo tenaoatili: ic qujmatia, ',
 'aco itla ovi, inpan ie ommuchioaz:',
 'itla ouj, ie con monamjctizque: anoÃ§o  ',
 'ceme aca ie mjqujz: aco ievitz coco',
 'liztli, anoÃ§o  cana inpan, ieo almo',
 'tzaquaz. I njn pan muchioa, yn, ',
 'aco cana tepetzalan; atlauh itic, ',
 'ixtlaoatl itic, quauhnepantla, quauh',
 'ioocatla, quauhitic, quaujtl itic: ',
 'auh intlapuchteca, oztomeca, nene',
 'mjnj: iuhquj inpan omuchiuh, injn',
 'pan ovevetzcac oactli: qujtoaia. ',
 'A co, ie itla, commonamjctizque: ',
 'aco ie ontlaatoctizque: anoÃ§o  ie ',
 'acame, tlaveliloque, in mac ie om',
 'maqujzque, ichtecque, tetlacuj',
 'cujlique, tetlatlacaltique, tetlana',
 'moelique, in mac ieontlatlacazque,',
 'qujn tla cujcujlizque, qujntlacen'
  ];

  const imagePoints= [[[199, 61], [202, 61], [205, 61], [208, 61], [211, 61], [214, 61], [217, 61], [220, 61], [223, 61], [226, 61], [], [229, 61], [232, 61], [235, 61], [238, 61], [241, 61], [244, 61], [247, 61], [], [251, 61], [254, 61], [257, 61], [], [261, 61], [264, 61], [267, 61], [270, 61], [], [274, 61], [277, 61], [280, 61], [283, 61], [286, 61], [289, 61], [292, 61], [295, 61], [298, 61], [], [301, 61], [304, 61], [307, 61]], [[200, 74], [203, 74], [206, 74], [], [214, 74], [218, 74], [222, 74], [226, 74], [230, 74], [234, 74], [238, 74], [242, 74], [246, 74], [250, 74], [254, 74], [], [255, 74], [258, 74], [261, 74], [], [269, 74], [273, 74], [277, 74], [281, 74], [], [286, 74], [290, 74], [294, 74], [298, 74], [], [303, 74], [307, 74]], [[199, 85], [202, 85], [205, 85], [208, 85], [211, 85], [214, 85], [217, 85], [220, 85], [223, 85], [], [232, 85], [235, 85], [238, 85], [241, 85], [], [248, 85], [251, 85], [254, 85], [257, 85], [260, 85], [263, 85], [266, 85], [], [274, 85], [277, 85], [280, 85], [283, 85], [286, 85], [289, 85], [292, 85], [295, 85], [298, 85], [301, 85], [304, 85], [307, 85]], [[201, 96], [205, 96], [209, 96], [213, 96], [], [219, 96], [223, 96], [226, 96], [], [232, 96], [236, 96], [], [242, 96], [246, 96], [250, 96], [254, 96], [258, 96], [262, 96], [266, 96], [270, 96], [274, 96], [278, 96], [282, 96], [286, 96], [290, 96], [], [293, 96], [297, 96], [301, 96], [305, 96], [309, 96]], [[199, 107], [202, 107], [205, 107], [], [211, 107], [214, 107], [217, 107], [220, 107], [223, 107], [226, 107], [229, 107], [232, 107], [235, 107], [238, 107], [241, 107], [], [250, 107], [253, 107], [], [259, 107], [262, 107], [265, 107], [268, 107], [271, 107], [274, 107], [277, 107], [], [285, 107], [288, 107], [291, 107], [294, 107], [297, 107], [300, 107], [303, 107], [306, 107]], [[200, 119], [203, 119], [206, 119], [209, 119], [212, 119], [215, 119], [], [221, 119], [224, 119], [227, 119], [230, 119], [], [236, 119], [239, 119], [242, 119], [245, 119], [248, 119], [], [254, 119], [257, 119], [260, 119], [263, 119], [266, 119], [269, 119], [272, 119], [275, 119], [], [281, 119], [284, 119], [287, 119], [290, 119], [293, 119], [296, 119], [299, 119], [302, 119], [305, 119], [308, 119]], [[200, 132], [204, 132], [], [210, 132], [214, 132], [218, 132], [222, 132], [226, 132], [230, 132], [234, 132], [238, 132], [242, 132], [246, 132], [250, 132], [], [253, 132], [257, 132], [261, 132], [265, 132], [269, 132], [273, 132], [277, 132], [281, 132], [285, 132], [], [289, 132], [293, 132], [297, 132], [301, 132], [305, 132], [309, 132]], [[197, 145], [200, 145], [203, 145], [206, 145], [209, 145], [], [218, 145], [222, 145], [226, 145], [230, 145], [234, 145], [238, 145], [], [241, 145], [244, 145], [247, 145], [250, 145], [253, 145], [256, 145], [259, 145], [262, 145], [265, 145], [], [275, 145], [278, 145], [281, 145], [284, 145], [287, 145], [290, 145], [293, 145], [], [303, 145], [307, 145]], [[199, 155], [202, 155], [205, 155], [208, 155], [211, 155], [214, 155], [217, 155], [220, 155], [], [228, 155], [231, 155], [234, 155], [237, 155], [240, 155], [243, 155], [246, 155], [], [254, 155], [257, 155], [260, 155], [263, 155], [266, 155], [269, 155], [272, 155], [275, 155], [278, 155], [], [286, 155], [289, 155], [292, 155], [295, 155], [298, 155], [], [305, 155], [308, 155]], [[197, 168], [200, 168], [203, 168], [206, 168], [209, 168], [], [216, 168], [219, 168], [], [225, 168], [228, 168], [231, 168], [234, 168], [237, 168], [240, 168], [243, 168], [246, 168], [249, 168], [252, 168], [], [260, 168], [263, 168], [], [269, 168], [272, 168], [275, 168], [278, 168], [281, 168], [284, 168], [287, 168], [290, 168], [293, 168], [296, 168], [299, 168], [302, 168]], [[198, 180], [201, 180], [204, 180], [], [210, 180], [213, 180], [216, 180], [219, 180], [222, 180], [225, 180], [], [232, 180], [235, 180], [238, 180], [241, 180], [244, 180], [247, 180], [250, 180], [253, 180], [256, 180], [259, 180], [262, 180], [], [270, 180], [273, 180], [], [279, 180], [282, 180], [285, 180], [288, 180], [291, 180], [294, 180], [297, 180], [300, 180], [303, 180]], [[199, 193], [202, 193], [205, 193], [], [212, 193], [215, 193], [218, 193], [221, 193], [], [228, 193], [231, 193], [234, 193], [237, 193], [], [244, 193], [247, 193], [250, 193], [253, 193], [256, 193], [], [264, 193], [267, 193], [], [273, 193], [276, 193], [279, 193], [282, 193], [285, 193], [288, 193], [291, 193], [294, 193], [297, 193], [300, 193], [303, 193]], [[199, 207], [202, 207], [205, 207], [208, 207], [], [212, 207], [215, 207], [218, 207], [221, 207], [], [225, 207], [228, 207], [], [232, 207], [235, 207], [238, 207], [], [242, 207], [245, 207], [248, 207], [251, 207], [254, 207], [257, 207], [260, 207], [263, 207], [266, 207], [269, 207], [272, 207], [275, 207], [278, 207], [281, 207], [], [284, 207], [287, 207], [290, 207], [293, 207], [296, 207], [299, 207]], [[197, 218], [200, 218], [203, 218], [206, 218], [], [213, 218], [216, 218], [219, 218], [], [225, 218], [228, 218], [], [234, 218], [237, 218], [240, 218], [243, 218], [246, 218], [249, 218], [252, 218], [], [260, 218], [263, 218], [266, 218], [], [272, 218], [275, 218], [278, 218], [281, 218], [284, 218], [287, 218], [], [294, 218], [297, 218], [300, 218], [303, 218]], [[196, 231], [199, 231], [202, 231], [205, 231], [208, 231], [211, 231], [214, 231], [], [221, 231], [224, 231], [227, 231], [230, 231], [233, 231], [236, 231], [], [243, 231], [246, 231], [249, 231], [252, 231], [], [258, 231], [261, 231], [264, 231], [267, 231], [270, 231], [273, 231], [], [280, 231], [283, 231], [286, 231], [], [292, 231], [295, 231], [298, 231], [301, 231]], [[198, 244], [202, 244], [206, 244], [210, 244], [214, 244], [218, 244], [222, 244], [226, 244], [], [228, 244], [], [234, 244], [237, 244], [240, 244], [], [247, 244], [250, 244], [253, 244], [], [261, 244], [265, 244], [269, 244], [273, 244], [277, 244], [281, 244], [285, 244], [289, 244], [], [291, 244], [294, 244], [297, 244]], [[198, 257], [201, 257], [204, 257], [], [210, 257], [213, 257], [216, 257], [219, 257], [], [225, 257], [228, 257], [231, 257], [234, 257], [237, 257], [240, 257], [243, 257], [246, 257], [249, 257], [252, 257], [255, 257], [], [263, 257], [266, 257], [269, 257], [272, 257], [275, 257], [278, 257], [], [285, 257], [288, 257], [291, 257], [294, 257], [297, 257]], [[198, 268], [201, 268], [204, 268], [207, 268], [210, 268], [213, 268], [216, 268], [219, 268], [222, 268], [], [230, 268], [233, 268], [236, 268], [239, 268], [242, 268], [], [249, 268], [252, 268], [255, 268], [258, 268], [261, 268], [264, 268], [267, 268], [270, 268], [273, 268], [276, 268], [279, 268], [282, 268], [285, 268], [288, 268], [], [297, 268], [300, 268], [303, 268], [306, 268], [309, 268]], [[196, 281], [199, 281], [202, 281], [205, 281], [208, 281], [211, 281], [214, 281], [217, 281], [220, 281], [], [228, 281], [231, 281], [234, 281], [237, 281], [240, 281], [243, 281], [246, 281], [249, 281], [252, 281], [255, 281], [], [263, 281], [266, 281], [269, 281], [272, 281], [275, 281], [278, 281], [281, 281], [], [289, 281], [292, 281], [295, 281], [298, 281], [301, 281]], [[196, 292], [199, 292], [202, 292], [], [210, 292], [214, 292], [218, 292], [222, 292], [226, 292], [230, 292], [234, 292], [238, 292], [242, 292], [246, 292], [250, 292], [254, 292], [258, 292], [262, 292], [], [261, 292], [264, 292], [267, 292], [270, 292], [273, 292], [276, 292], [279, 292], [282, 292], [285, 292], [], [296, 292], [300, 292], [304, 292], [308, 292]], [[196, 305], [199, 305], [202, 305], [205, 305], [208, 305], [], [217, 305], [221, 305], [225, 305], [229, 305], [233, 305], [237, 305], [], [240, 305], [243, 305], [246, 305], [249, 305], [252, 305], [], [261, 305], [265, 305], [269, 305], [273, 305], [277, 305], [281, 305], [285, 305], [289, 305], [293, 305], [], [296, 305], [300, 305], [304, 305], [308, 305]], [[197, 317], [200, 317], [203, 317], [], [210, 317], [213, 317], [216, 317], [219, 317], [222, 317], [225, 317], [228, 317], [231, 317], [234, 317], [237, 317], [], [247, 317], [250, 317], [253, 317], [256, 317], [259, 317], [262, 317], [265, 317], [], [273, 317], [276, 317], [279, 317], [282, 317], [285, 317], [288, 317], [291, 317], [294, 317], [297, 317]], [[198, 329], [], [203, 329], [206, 329], [209, 329], [], [216, 329], [219, 329], [], [225, 329], [228, 329], [231, 329], [234, 329], [237, 329], [], [244, 329], [247, 329], [250, 329], [253, 329], [256, 329], [259, 329], [262, 329], [265, 329], [268, 329], [271, 329], [274, 329], [277, 329], [280, 329], [283, 329], [286, 329], [289, 329], [292, 329]], [[196, 343], [199, 343], [202, 343], [], [208, 343], [211, 343], [], [217, 343], [220, 343], [223, 343], [226, 343], [229, 343], [232, 343], [235, 343], [238, 343], [241, 343], [244, 343], [247, 343], [250, 343], [253, 343], [256, 343], [259, 343], [262, 343], [], [273, 343], [276, 343], [279, 343], [282, 343], [285, 343], [288, 343], [], [295, 343], [298, 343]], [[197, 354], [201, 354], [205, 354], [209, 354], [213, 354], [217, 354], [], [220, 354], [223, 354], [226, 354], [229, 354], [232, 354], [235, 354], [238, 354], [241, 354], [244, 354], [247, 354], [250, 354], [253, 354], [256, 354], [], [269, 354], [273, 354], [], [278, 354], [281, 354], [284, 354], [], [292, 354], [296, 354], [], [302, 354], [306, 354]], [[197, 366], [201, 366], [205, 366], [209, 366], [213, 366], [217, 366], [221, 366], [225, 366], [229, 366], [233, 366], [], [237, 366], [241, 366], [245, 366], [249, 366], [253, 366], [257, 366], [261, 366], [265, 366], [269, 366], [273, 366], [], [277, 366], [281, 366], [285, 366], [289, 366], [293, 366], [297, 366], [301, 366], [305, 366]], [[196, 377], [199, 377], [202, 377], [205, 377], [208, 377], [211, 377], [214, 377], [217, 377], [220, 377], [], [228, 377], [231, 377], [234, 377], [237, 377], [240, 377], [243, 377], [246, 377], [249, 377], [252, 377], [255, 377], [258, 377], [261, 377], [264, 377], [267, 377], [270, 377], [273, 377], [276, 377], [], [287, 377], [290, 377], [293, 377], [296, 377], [299, 377], [302, 377], [305, 377]], [[196, 388], [199, 388], [202, 388], [205, 388], [208, 388], [211, 388], [214, 388], [217, 388], [220, 388], [], [230, 388], [233, 388], [], [239, 388], [242, 388], [245, 388], [], [252, 388], [255, 388], [258, 388], [261, 388], [264, 388], [267, 388], [270, 388], [273, 388], [276, 388], [279, 388], [282, 388], [285, 388], [288, 388], [291, 388], [294, 388], [297, 388], [300, 388]], [[196, 401], [200, 401], [204, 401], [208, 401], [], [212, 401], [215, 401], [218, 401], [], [225, 401], [228, 401], [231, 401], [234, 401], [237, 401], [240, 401], [243, 401], [246, 401], [249, 401], [252, 401], [255, 401], [258, 401], [261, 401], [], [274, 401], [278, 401], [282, 401], [286, 401], [290, 401], [294, 401], [298, 401], [302, 401], [306, 401], [309, 401]]]

  const codeContainer = document.getElementById('code');
  const imageContainer = document.getElementById('imageContainer');
  const highlightPoint = document.getElementById('highlightPoint');

  lines.forEach((line, index) => {
    const div = document.createElement('div');
    div.textContent = line;
    div.className = 'line';
    div.id = `line${index + 1}`;
    codeContainer.appendChild(div);
  });

  document.addEventListener('click', updateCursorPosition);

  function updateCursorPosition(event) {
    const { target } = event;

    // Check if the clicked element is a line in the code
    if (target.classList.contains('line')) {
      const line = getLineNumber(target);
      const character = Math.floor(event.offsetX / getAverageCharWidth(target));

      // Highlight the corresponding point on the image
      highlightImagePoint(line, character);
    }
  }

  function getLineNumber(target) {
    const id = target.id;
    const line = parseInt(id.replace('line', ''), 10);
    return line;
  }

  function getAverageCharWidth(target) {
    const text = target.textContent.replace(/\s/g, 'W'); // Replace spaces with a character for accurate width
    const testSpan = document.createElement('span');
    testSpan.textContent = text;
    target.appendChild(testSpan);
    const width = testSpan.offsetWidth / text.length;
    target.removeChild(testSpan);
    return width;
  }

  function highlightImagePoint(line, character) {
    // Assuming line and character are 1-based indices
    const pointsForLine = imagePoints[line - 1];
    console.log('Line ', line);
    console.log('Character ', character);
    if (pointsForLine && character <= pointsForLine.length) {
      console.log('IN IF');
      if(pointsForLine[character - 1].length>0){
        const [x, y] = pointsForLine[character - 1];
        highlightPoint.style.left = `${x}px`;
        highlightPoint.style.top = `${y}px`;
        highlightPoint.style.display = 'block';
      }

     
    } else {
      // Hide the highlight if no valid point is found
      highlightPoint.style.display = 'none';
    }
  }
</script>

</body>
</html>
